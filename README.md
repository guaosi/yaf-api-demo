åŸºäºYafå¼€å‘é«˜æ€§èƒ½çš„APIæ¥å£
===============
> ğŸš€ æ¥è¿‘åŸç”Ÿ,å»é™¤å¤æ‚çš„æ¡†æ¶åŠŸèƒ½ã€‚
## ç‰¹æ€§

- åŸç”ŸPDOå®ç°CRUD

- åŸç”Ÿå®ç°åˆ†é¡µ

- åŸºäºäº‘ä¿¡å®ç°çŸ­ä¿¡å‘é€

- åŸºäºä¸ªæ¨å®ç°APPæ¶ˆæ¯æ¨é€

- åˆ›å»ºå¾®ä¿¡ä»˜æ¬¾äºŒç»´ç 

> Yafæœ€æ–°ç‰ˆçš„è¿è¡Œç¯å¢ƒè¦æ±‚PHP7ä»¥ä¸Šã€‚


## è¦æ±‚

| ä¾èµ– | è¯´æ˜ |
| -------- | -------- |
| PHP| `>= 7.0.0` |
| Mysql| `>= 5.5` ||
| nginx |ç”¨äºç½‘å€ä»£ç†è§£æ|

## æ³¨æ„
1. æ•°æ®åº“ç»“æ„çš„SQLæ–‡ä»¶å·²ç»æ”¾åœ¨é¡¹ç›®ä¸­,éœ€è¦è‡ªè¡Œå¯¼å…¥.

2. PostMançš„APIæ¥å£æ–‡ä»¶ä¹Ÿå·²ç»æ”¾åœ¨é¡¹ç›®ä¸­,éœ€è¦è‡ªè¡Œå¯¼å…¥.

3. **yafæ‰©å±•è¯·è‡ªè¡Œå®‰è£…**

## å®‰è£…

1. é€šè¿‡[Github](https://github.com/guaosi/yaf-api-demo),forkåˆ°è‡ªå·±çš„é¡¹ç›®ä¸‹
```
git clone git@github.com:<ä½ çš„ç”¨æˆ·å>/yaf-api-demo.git
```
2. åœ¨application/models/Push.php å¡«å†™ä¸ªæ¨ç›¸å…³è´¦æˆ·ä¿¡æ¯
```
define('APPKEY','');
define('APPID','');
define('MASTERSECRET','');
```
3. åœ¨application/models/Sms.php å¡«å†™äº‘ä¿¡ç›¸å…³è´¦æˆ·ä¿¡æ¯
```
//æ¥å£è´¦å·
$smsuid = '';
//ç™»å½•å¯†ç 
$smspwd = '';
```

## nginxé‡å†™è§„åˆ™(å®˜æ–¹æ–‡æ¡£æœ‰å‘)
```
if (!-e $request_filename) {
    rewrite ^/(.*)  /index.php?$1 last;
  }
```

## æµç¨‹
1. å…ˆè¿›å…¥å…¥å£æ–‡ä»¶index.php
2. å†è¿›å…¥Bootstrap.php,åšä¸€äº›ç›¸å…³æ“ä½œï¼Œå¦‚è·¯ç”±åˆ†å‘
3. æ ¹æ®è·¯ç”±æ‰¾åˆ°æ§åˆ¶å™¨
4. è¿”å›ç»“æœ

## è·¯ç”±é…ç½®
é€‰æ‹©å®˜ç½‘8.8çš„è·¯ç”±
```
     $router = Yaf_Dispatcher::getInstance()->getRouter();
     //åˆ›å»ºä¸€ä¸ªè·¯ç”±åè®®å®ä¾‹
     $route = new Yaf_Route_Rewrite(
     ã€€ã€€'product/:ident',
     ã€€ã€€array(
     ã€€ã€€ã€€ã€€'controller' => 'products',
     ã€€ã€€ã€€ã€€'action' => 'view'
     ã€€ã€€)
     );
     //ä½¿ç”¨è·¯ç”±å™¨è£…è½½è·¯ç”±åè®®
     $router->addRoute('product', $route);
```
yafé»˜è®¤æ”¯æŒRestFulé£æ ¼çš„API